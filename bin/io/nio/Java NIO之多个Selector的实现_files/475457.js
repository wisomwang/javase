document.write('<link href="https://code.csdn.net/assets/embed-df3d4903cf8e7d8df1c7eddf8fed1500.css" media="screen" rel="stylesheet" type="text/css" />');
document.write("<div class=\'CODE_snippets\'>\n<div class=\'snippets_cont file_holder\'>\n<div class=\'file_content code\'>\n<div class=\'white\'>\n<table class=\"lines\"><tr><td><pre class=\"line_numbers\" style=\"width:30px\"><a id=\"L1\" href=\"#L1\" rel=\"#L1\"><i class=\"icon-link\"><\/i>  1<\/a>\n<a id=\"L2\" href=\"#L2\" rel=\"#L2\"><i class=\"icon-link\"><\/i>  2<\/a>\n<a id=\"L3\" href=\"#L3\" rel=\"#L3\"><i class=\"icon-link\"><\/i>  3<\/a>\n<a id=\"L4\" href=\"#L4\" rel=\"#L4\"><i class=\"icon-link\"><\/i>  4<\/a>\n<a id=\"L5\" href=\"#L5\" rel=\"#L5\"><i class=\"icon-link\"><\/i>  5<\/a>\n<a id=\"L6\" href=\"#L6\" rel=\"#L6\"><i class=\"icon-link\"><\/i>  6<\/a>\n<a id=\"L7\" href=\"#L7\" rel=\"#L7\"><i class=\"icon-link\"><\/i>  7<\/a>\n<a id=\"L8\" href=\"#L8\" rel=\"#L8\"><i class=\"icon-link\"><\/i>  8<\/a>\n<a id=\"L9\" href=\"#L9\" rel=\"#L9\"><i class=\"icon-link\"><\/i>  9<\/a>\n<a id=\"L10\" href=\"#L10\" rel=\"#L10\"><i class=\"icon-link\"><\/i> 10<\/a>\n<a id=\"L11\" href=\"#L11\" rel=\"#L11\"><i class=\"icon-link\"><\/i> 11<\/a>\n<a id=\"L12\" href=\"#L12\" rel=\"#L12\"><i class=\"icon-link\"><\/i> 12<\/a>\n<a id=\"L13\" href=\"#L13\" rel=\"#L13\"><i class=\"icon-link\"><\/i> 13<\/a>\n<a id=\"L14\" href=\"#L14\" rel=\"#L14\"><i class=\"icon-link\"><\/i> 14<\/a>\n<a id=\"L15\" href=\"#L15\" rel=\"#L15\"><i class=\"icon-link\"><\/i> 15<\/a>\n<a id=\"L16\" href=\"#L16\" rel=\"#L16\"><i class=\"icon-link\"><\/i> 16<\/a>\n<a id=\"L17\" href=\"#L17\" rel=\"#L17\"><i class=\"icon-link\"><\/i> 17<\/a>\n<a id=\"L18\" href=\"#L18\" rel=\"#L18\"><i class=\"icon-link\"><\/i> 18<\/a>\n<a id=\"L19\" href=\"#L19\" rel=\"#L19\"><i class=\"icon-link\"><\/i> 19<\/a>\n<a id=\"L20\" href=\"#L20\" rel=\"#L20\"><i class=\"icon-link\"><\/i> 20<\/a>\n<a id=\"L21\" href=\"#L21\" rel=\"#L21\"><i class=\"icon-link\"><\/i> 21<\/a>\n<a id=\"L22\" href=\"#L22\" rel=\"#L22\"><i class=\"icon-link\"><\/i> 22<\/a>\n<a id=\"L23\" href=\"#L23\" rel=\"#L23\"><i class=\"icon-link\"><\/i> 23<\/a>\n<a id=\"L24\" href=\"#L24\" rel=\"#L24\"><i class=\"icon-link\"><\/i> 24<\/a>\n<a id=\"L25\" href=\"#L25\" rel=\"#L25\"><i class=\"icon-link\"><\/i> 25<\/a>\n<a id=\"L26\" href=\"#L26\" rel=\"#L26\"><i class=\"icon-link\"><\/i> 26<\/a>\n<a id=\"L27\" href=\"#L27\" rel=\"#L27\"><i class=\"icon-link\"><\/i> 27<\/a>\n<a id=\"L28\" href=\"#L28\" rel=\"#L28\"><i class=\"icon-link\"><\/i> 28<\/a>\n<a id=\"L29\" href=\"#L29\" rel=\"#L29\"><i class=\"icon-link\"><\/i> 29<\/a>\n<a id=\"L30\" href=\"#L30\" rel=\"#L30\"><i class=\"icon-link\"><\/i> 30<\/a>\n<a id=\"L31\" href=\"#L31\" rel=\"#L31\"><i class=\"icon-link\"><\/i> 31<\/a>\n<a id=\"L32\" href=\"#L32\" rel=\"#L32\"><i class=\"icon-link\"><\/i> 32<\/a>\n<a id=\"L33\" href=\"#L33\" rel=\"#L33\"><i class=\"icon-link\"><\/i> 33<\/a>\n<a id=\"L34\" href=\"#L34\" rel=\"#L34\"><i class=\"icon-link\"><\/i> 34<\/a>\n<a id=\"L35\" href=\"#L35\" rel=\"#L35\"><i class=\"icon-link\"><\/i> 35<\/a>\n<a id=\"L36\" href=\"#L36\" rel=\"#L36\"><i class=\"icon-link\"><\/i> 36<\/a>\n<a id=\"L37\" href=\"#L37\" rel=\"#L37\"><i class=\"icon-link\"><\/i> 37<\/a>\n<a id=\"L38\" href=\"#L38\" rel=\"#L38\"><i class=\"icon-link\"><\/i> 38<\/a>\n<a id=\"L39\" href=\"#L39\" rel=\"#L39\"><i class=\"icon-link\"><\/i> 39<\/a>\n<a id=\"L40\" href=\"#L40\" rel=\"#L40\"><i class=\"icon-link\"><\/i> 40<\/a>\n<a id=\"L41\" href=\"#L41\" rel=\"#L41\"><i class=\"icon-link\"><\/i> 41<\/a>\n<a id=\"L42\" href=\"#L42\" rel=\"#L42\"><i class=\"icon-link\"><\/i> 42<\/a>\n<a id=\"L43\" href=\"#L43\" rel=\"#L43\"><i class=\"icon-link\"><\/i> 43<\/a>\n<a id=\"L44\" href=\"#L44\" rel=\"#L44\"><i class=\"icon-link\"><\/i> 44<\/a>\n<a id=\"L45\" href=\"#L45\" rel=\"#L45\"><i class=\"icon-link\"><\/i> 45<\/a>\n<a id=\"L46\" href=\"#L46\" rel=\"#L46\"><i class=\"icon-link\"><\/i> 46<\/a>\n<a id=\"L47\" href=\"#L47\" rel=\"#L47\"><i class=\"icon-link\"><\/i> 47<\/a>\n<a id=\"L48\" href=\"#L48\" rel=\"#L48\"><i class=\"icon-link\"><\/i> 48<\/a>\n<a id=\"L49\" href=\"#L49\" rel=\"#L49\"><i class=\"icon-link\"><\/i> 49<\/a>\n<a id=\"L50\" href=\"#L50\" rel=\"#L50\"><i class=\"icon-link\"><\/i> 50<\/a>\n<a id=\"L51\" href=\"#L51\" rel=\"#L51\"><i class=\"icon-link\"><\/i> 51<\/a>\n<a id=\"L52\" href=\"#L52\" rel=\"#L52\"><i class=\"icon-link\"><\/i> 52<\/a>\n<a id=\"L53\" href=\"#L53\" rel=\"#L53\"><i class=\"icon-link\"><\/i> 53<\/a>\n<a id=\"L54\" href=\"#L54\" rel=\"#L54\"><i class=\"icon-link\"><\/i> 54<\/a>\n<a id=\"L55\" href=\"#L55\" rel=\"#L55\"><i class=\"icon-link\"><\/i> 55<\/a>\n<a id=\"L56\" href=\"#L56\" rel=\"#L56\"><i class=\"icon-link\"><\/i> 56<\/a>\n<a id=\"L57\" href=\"#L57\" rel=\"#L57\"><i class=\"icon-link\"><\/i> 57<\/a>\n<a id=\"L58\" href=\"#L58\" rel=\"#L58\"><i class=\"icon-link\"><\/i> 58<\/a>\n<a id=\"L59\" href=\"#L59\" rel=\"#L59\"><i class=\"icon-link\"><\/i> 59<\/a>\n<a id=\"L60\" href=\"#L60\" rel=\"#L60\"><i class=\"icon-link\"><\/i> 60<\/a>\n<a id=\"L61\" href=\"#L61\" rel=\"#L61\"><i class=\"icon-link\"><\/i> 61<\/a>\n<a id=\"L62\" href=\"#L62\" rel=\"#L62\"><i class=\"icon-link\"><\/i> 62<\/a>\n<a id=\"L63\" href=\"#L63\" rel=\"#L63\"><i class=\"icon-link\"><\/i> 63<\/a>\n<a id=\"L64\" href=\"#L64\" rel=\"#L64\"><i class=\"icon-link\"><\/i> 64<\/a>\n<a id=\"L65\" href=\"#L65\" rel=\"#L65\"><i class=\"icon-link\"><\/i> 65<\/a>\n<a id=\"L66\" href=\"#L66\" rel=\"#L66\"><i class=\"icon-link\"><\/i> 66<\/a>\n<a id=\"L67\" href=\"#L67\" rel=\"#L67\"><i class=\"icon-link\"><\/i> 67<\/a>\n<a id=\"L68\" href=\"#L68\" rel=\"#L68\"><i class=\"icon-link\"><\/i> 68<\/a>\n<a id=\"L69\" href=\"#L69\" rel=\"#L69\"><i class=\"icon-link\"><\/i> 69<\/a>\n<a id=\"L70\" href=\"#L70\" rel=\"#L70\"><i class=\"icon-link\"><\/i> 70<\/a>\n<a id=\"L71\" href=\"#L71\" rel=\"#L71\"><i class=\"icon-link\"><\/i> 71<\/a>\n<a id=\"L72\" href=\"#L72\" rel=\"#L72\"><i class=\"icon-link\"><\/i> 72<\/a>\n<a id=\"L73\" href=\"#L73\" rel=\"#L73\"><i class=\"icon-link\"><\/i> 73<\/a>\n<a id=\"L74\" href=\"#L74\" rel=\"#L74\"><i class=\"icon-link\"><\/i> 74<\/a>\n<a id=\"L75\" href=\"#L75\" rel=\"#L75\"><i class=\"icon-link\"><\/i> 75<\/a><\/pre><\/td><td><div class=\"highlight\"><pre><div id=\"LC1\" class=\"line\"><span class=\"kn\">package<\/span> <span class=\"n\">com<\/span><span class=\"o\">.<\/span><span class=\"na\">jjzhk<\/span><span class=\"o\">.<\/span><span class=\"na\">NIOPractice<\/span><span class=\"o\">.<\/span><span class=\"na\">MultiSelector<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC2\" class=\"line\"><br/><\/div><div id=\"LC3\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.io.IOException<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC4\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.nio.channels.SelectionKey<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC5\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.nio.channels.Selector<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC6\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.nio.channels.ServerSocketChannel<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC7\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.nio.channels.SocketChannel<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC8\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.util.Iterator<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC9\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.util.Set<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC10\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.util.concurrent.locks.ReadWriteLock<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC11\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">java.util.concurrent.locks.ReentrantReadWriteLock<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC12\" class=\"line\"><br/><\/div><div id=\"LC13\" class=\"line\"><span class=\"kn\">import<\/span> <span class=\"nn\">org.apache.log4j.Logger<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC14\" class=\"line\"><br/><\/div><div id=\"LC15\" class=\"line\"><span class=\"kd\">public<\/span> <span class=\"kd\">abstract<\/span> <span class=\"kd\">class<\/span> <span class=\"nc\">SocketHandler<\/span> <span class=\"kd\">implements<\/span> <span class=\"n\">Runnable<\/span><span class=\"o\">{<\/span><\/div><div id=\"LC16\" class=\"line\">	<span class=\"kd\">protected<\/span> <span class=\"n\">Selector<\/span> <span class=\"n\">selector<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC17\" class=\"line\">	<span class=\"kd\">protected<\/span> <span class=\"n\">SocketChannel<\/span> <span class=\"n\">socketChannel<\/span> <span class=\"o\">=<\/span> <span class=\"kc\">null<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC18\" class=\"line\">	<span class=\"kd\">protected<\/span> <span class=\"n\">ServerSocketChannel<\/span> <span class=\"n\">serverSocketChannel<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC19\" class=\"line\">	<span class=\"kd\">protected<\/span> <span class=\"n\">ServerDispatcher<\/span> <span class=\"n\">dispatcher<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC20\" class=\"line\">	<span class=\"kd\">protected<\/span> <span class=\"kd\">final<\/span> <span class=\"kd\">static<\/span> <span class=\"n\">Logger<\/span> <span class=\"n\">logger<\/span> <span class=\"o\">=<\/span> <span class=\"n\">Logger<\/span><span class=\"o\">.<\/span><span class=\"na\">getLogger<\/span><span class=\"o\">(<\/span><span class=\"n\">SocketHandler<\/span><span class=\"o\">.<\/span><span class=\"na\">class<\/span><span class=\"o\">);<\/span><\/div><div id=\"LC21\" class=\"line\">	<span class=\"kd\">private<\/span> <span class=\"n\">ReadWriteLock<\/span> <span class=\"n\">readWriteLock<\/span> <span class=\"o\">=<\/span> <span class=\"k\">new<\/span> <span class=\"n\">ReentrantReadWriteLock<\/span><span class=\"o\">();;<\/span><\/div><div id=\"LC22\" class=\"line\">	<span class=\"kd\">public<\/span> <span class=\"nf\">SocketHandler<\/span><span class=\"o\">(<\/span><span class=\"n\">ServerDispatcher<\/span> <span class=\"n\">dispatcher<\/span><span class=\"o\">,<\/span> <span class=\"n\">ServerSocketChannel<\/span> <span class=\"n\">sc<\/span><span class=\"o\">,<\/span> <span class=\"n\">Selector<\/span> <span class=\"n\">selector<\/span><span class=\"o\">)<\/span> <span class=\"kd\">throws<\/span> <span class=\"n\">IOException<\/span><span class=\"o\">{<\/span><\/div><div id=\"LC23\" class=\"line\">		<span class=\"k\">this<\/span><span class=\"o\">.<\/span><span class=\"na\">selector<\/span> <span class=\"o\">=<\/span> <span class=\"n\">selector<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC24\" class=\"line\">		<span class=\"k\">this<\/span><span class=\"o\">.<\/span><span class=\"na\">serverSocketChannel<\/span> <span class=\"o\">=<\/span> <span class=\"n\">sc<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC25\" class=\"line\">		<span class=\"k\">this<\/span><span class=\"o\">.<\/span><span class=\"na\">dispatcher<\/span> <span class=\"o\">=<\/span> <span class=\"n\">dispatcher<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC26\" class=\"line\">	<span class=\"o\">}<\/span><\/div><div id=\"LC27\" class=\"line\">	<\/div><div id=\"LC28\" class=\"line\">	<span class=\"kd\">public<\/span> <span class=\"kd\">abstract<\/span> <span class=\"kt\">void<\/span> <span class=\"nf\">runnerExecute<\/span><span class=\"o\">(<\/span><span class=\"kt\">int<\/span> <span class=\"n\">readyKeyOps<\/span><span class=\"o\">)<\/span> <span class=\"kd\">throws<\/span> <span class=\"n\">IOException<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC29\" class=\"line\">	<\/div><div id=\"LC30\" class=\"line\">	<span class=\"kd\">public<\/span> <span class=\"kd\">final<\/span> <span class=\"kt\">void<\/span> <span class=\"nf\">run<\/span><span class=\"o\">()<\/span><\/div><div id=\"LC31\" class=\"line\">	<span class=\"o\">{<\/span><\/div><div id=\"LC32\" class=\"line\">		<span class=\"k\">while<\/span><span class=\"o\">(<\/span><span class=\"kc\">true<\/span><span class=\"o\">)<\/span><\/div><div id=\"LC33\" class=\"line\">		<span class=\"o\">{<\/span><\/div><div id=\"LC34\" class=\"line\">			<span class=\"n\">readWriteLock<\/span><span class=\"o\">.<\/span><span class=\"na\">readLock<\/span><span class=\"o\">().<\/span><span class=\"na\">lock<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC35\" class=\"line\">			<span class=\"k\">try<\/span> <span class=\"o\">{<\/span><\/div><div id=\"LC36\" class=\"line\">				<span class=\"kt\">int<\/span> <span class=\"n\">keyOps<\/span> <span class=\"o\">=<\/span> <span class=\"k\">this<\/span><span class=\"o\">.<\/span><span class=\"na\">Select<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC37\" class=\"line\"><br/><\/div><div id=\"LC38\" class=\"line\">				<span class=\"n\">runnerExecute<\/span><span class=\"o\">(<\/span><span class=\"n\">keyOps<\/span><span class=\"o\">);<\/span><\/div><div id=\"LC39\" class=\"line\">				<\/div><div id=\"LC40\" class=\"line\">				<span class=\"n\">Thread<\/span><span class=\"o\">.<\/span><span class=\"na\">sleep<\/span><span class=\"o\">(<\/span><span class=\"mi\">1000<\/span><span class=\"o\">);<\/span><\/div><div id=\"LC41\" class=\"line\">			<span class=\"o\">}<\/span> <span class=\"k\">catch<\/span> <span class=\"o\">(<\/span><span class=\"n\">Exception<\/span> <span class=\"n\">e<\/span><span class=\"o\">)<\/span> <span class=\"o\">{<\/span><\/div><div id=\"LC42\" class=\"line\">				<span class=\"c1\">// TODO: handle exception<\/span><\/div><div id=\"LC43\" class=\"line\">				<span class=\"n\">logger<\/span><span class=\"o\">.<\/span><span class=\"na\">debug<\/span><span class=\"o\">(<\/span><span class=\"n\">e<\/span><span class=\"o\">.<\/span><span class=\"na\">getMessage<\/span><span class=\"o\">());<\/span><\/div><div id=\"LC44\" class=\"line\">			<span class=\"o\">}<\/span><\/div><div id=\"LC45\" class=\"line\">			<span class=\"k\">finally<\/span> <span class=\"o\">{<\/span><\/div><div id=\"LC46\" class=\"line\">				<span class=\"n\">readWriteLock<\/span><span class=\"o\">.<\/span><span class=\"na\">readLock<\/span><span class=\"o\">().<\/span><span class=\"na\">unlock<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC47\" class=\"line\">			<span class=\"o\">}<\/span><\/div><div id=\"LC48\" class=\"line\">		<span class=\"o\">}<\/span><\/div><div id=\"LC49\" class=\"line\">	<span class=\"o\">}<\/span><\/div><div id=\"LC50\" class=\"line\">	<\/div><div id=\"LC51\" class=\"line\">	<span class=\"kd\">private<\/span> <span class=\"kt\">int<\/span> <span class=\"nf\">Select<\/span><span class=\"o\">()<\/span> <span class=\"kd\">throws<\/span> <span class=\"n\">IOException<\/span><\/div><div id=\"LC52\" class=\"line\">	<span class=\"o\">{<\/span>	<\/div><div id=\"LC53\" class=\"line\">		<span class=\"kt\">int<\/span> <span class=\"n\">keyOps<\/span> <span class=\"o\">=<\/span> <span class=\"k\">this<\/span><span class=\"o\">.<\/span><span class=\"na\">selector<\/span><span class=\"o\">.<\/span><span class=\"na\">selectNow<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC54\" class=\"line\">		<\/div><div id=\"LC55\" class=\"line\">		<span class=\"kt\">boolean<\/span> <span class=\"n\">flag<\/span> <span class=\"o\">=<\/span> <span class=\"n\">keyOps<\/span> <span class=\"o\">&gt;<\/span> <span class=\"mi\">0<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC56\" class=\"line\">		<\/div><div id=\"LC57\" class=\"line\">		<span class=\"k\">if<\/span> <span class=\"o\">(<\/span><span class=\"n\">flag<\/span><span class=\"o\">)<\/span><\/div><div id=\"LC58\" class=\"line\">		<span class=\"o\">{<\/span><\/div><div id=\"LC59\" class=\"line\">			<span class=\"n\">Set<\/span><span class=\"o\">&lt;<\/span><span class=\"n\">SelectionKey<\/span> <span class=\"o\">&gt;<\/span><span class=\"n\">readyKeySet<\/span> <span class=\"o\">=<\/span> <span class=\"n\">selector<\/span><span class=\"o\">.<\/span><span class=\"na\">selectedKeys<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC60\" class=\"line\">			<span class=\"n\">Iterator<\/span><span class=\"o\">&lt;<\/span><span class=\"n\">SelectionKey<\/span><span class=\"o\">&gt;<\/span> <span class=\"n\">iterator<\/span> <span class=\"o\">=<\/span> <span class=\"n\">readyKeySet<\/span><span class=\"o\">.<\/span><span class=\"na\">iterator<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC61\" class=\"line\">			<span class=\"k\">while<\/span> <span class=\"o\">(<\/span><span class=\"n\">iterator<\/span><span class=\"o\">.<\/span><span class=\"na\">hasNext<\/span><span class=\"o\">())<\/span> <span class=\"o\">{<\/span><\/div><div id=\"LC62\" class=\"line\">				<span class=\"n\">SelectionKey<\/span> <span class=\"n\">key<\/span> <span class=\"o\">=<\/span> <span class=\"n\">iterator<\/span><span class=\"o\">.<\/span><span class=\"na\">next<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC63\" class=\"line\">				<span class=\"n\">iterator<\/span><span class=\"o\">.<\/span><span class=\"na\">remove<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC64\" class=\"line\">				<span class=\"n\">keyOps<\/span> <span class=\"o\">=<\/span> <span class=\"n\">key<\/span><span class=\"o\">.<\/span><span class=\"na\">readyOps<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC65\" class=\"line\">				<span class=\"k\">if<\/span> <span class=\"o\">(<\/span><span class=\"n\">keyOps<\/span> <span class=\"o\">==<\/span> <span class=\"n\">SelectionKey<\/span><span class=\"o\">.<\/span><span class=\"na\">OP_READ<\/span> <span class=\"o\">||<\/span> <span class=\"n\">keyOps<\/span> <span class=\"o\">==<\/span> <span class=\"n\">SelectionKey<\/span><span class=\"o\">.<\/span><span class=\"na\">OP_WRITE<\/span><span class=\"o\">)<\/span><\/div><div id=\"LC66\" class=\"line\">				<span class=\"o\">{<\/span><\/div><div id=\"LC67\" class=\"line\">					<span class=\"n\">socketChannel<\/span> <span class=\"o\">=<\/span> <span class=\"o\">(<\/span><span class=\"n\">SocketChannel<\/span><span class=\"o\">)<\/span><span class=\"n\">key<\/span><span class=\"o\">.<\/span><span class=\"na\">channel<\/span><span class=\"o\">();<\/span><\/div><div id=\"LC68\" class=\"line\">					<span class=\"n\">socketChannel<\/span><span class=\"o\">.<\/span><span class=\"na\">configureBlocking<\/span><span class=\"o\">(<\/span><span class=\"kc\">false<\/span><span class=\"o\">);<\/span><\/div><div id=\"LC69\" class=\"line\">				<span class=\"o\">}<\/span><\/div><div id=\"LC70\" class=\"line\">			<span class=\"o\">}<\/span><\/div><div id=\"LC71\" class=\"line\">		<span class=\"o\">}<\/span><\/div><div id=\"LC72\" class=\"line\">		<\/div><div id=\"LC73\" class=\"line\">		<span class=\"k\">return<\/span> <span class=\"n\">keyOps<\/span><span class=\"o\">;<\/span><\/div><div id=\"LC74\" class=\"line\">	<span class=\"o\">}<\/span><\/div><div id=\"LC75\" class=\"line\"><span class=\"o\">}<\/span><\/div><\/pre><\/div><\/td><\/tr><\/table>\n<\/div>\n<\/div>\n<script>\n  //<![CDATA[\n    $(function(){\n      $(\'.line_numbers\').css({\'width\':\'auto\'});\n    })\n  //]]>\n<\/script>\n\n<\/div>\n<h5 class=\'clearfix\'>\n<a class=\'to_CODE\' href=\'https://code.csdn.net/snippets/475457\' target=\'_blank\'>\n<span class=\'icon\'><\/span>\n来自CODE的代码片\n<\/a>\n<div class=\'pull-right\'>\n<span>\nSocketHandler.java\n<\/span>\n<\/div>\n<\/h5>\n<\/div>\n");

